<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Beercamp 2013</title>
        <!-- build:section header --><!-- /build -->
        <link href="../css/splash.css" type="text/css" rel="stylesheet"/>
    </head>
    <body class="splash">

        <div class="warning-modal">
            <p>We're going to need you to use a supported browser. Chrome and Safari work nicely. Or, you can <a href="#" id="close-modal">continue</a>.</p>
        </div>

        <div class="container">
            <div class="splasher">
                <div class="splashbg">
                    <div class="title"></div>
                    <a href="instructions.html" class="btn-start"></a>
                    <img id="splashchar1"  class="splashchar" src="images/splashchar1a.svg">
                    <img id="splashchar2"  class="splashchar" src="images/splashchar2.svg">
                    <img id="splashchar3"  class="splashchar" src="images/splashchar3.svg">
                    <img id="splashchar4"  class="splashchar" src="images/splashchar4.svg">
                    <img id="splashchar5h" class="splashchar" src="images/splashchar5-h.svg">
                    <img id="splashchar5b" class="splashchar" src="images/splashchar5-b.svg">
                    <div id="droolmask"><img id="drool" class="splashchar" src="images/drool.png" /></div>

                </div>
                <img id="splashcan" class="splashchar" src="images/can.png" />
            </div>
            <div class="coverup"></div>
            <!-- build:section banner --><!-- /build -->
        </div>

        <audio id="intro-sound">
           <source src="audio/loops/begin.wav" type="audio/wav">
        </audio>
        
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>

        var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        var isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);

        var browserAlert = function() {
            $('body').addClass('is-browser-warning');
            $('#close-modal').on('click', function(e) {
                e.preventDefault();
                $('body').removeClass('is-browser-warning');
            });
        };

        if ( !(isChrome || isSafari) ) {
            browserAlert();
        }

        var getResizeRatio = function(startWidth, startHeight, maxWidth, maxHeight){
            var ratioX = maxWidth / startWidth;
            var ratioY = maxHeight / startHeight;

            return ratioX <= ratioY ? ratioX : ratioY;
        };

        var getResizeDimensions = function(startWidth, startHeight, maxWidth, maxHeight){
            var ratio = getResizeRatio(startWidth, startHeight, maxWidth, maxHeight);

            return { width: Math.round(startWidth * ratio), height: Math.round(startHeight * ratio), ratio: ratio };
        };

        var changeWindow = function() {
            var currWidth = $(window).width();
            var currHeight = $(window).height()-64;

            if (currWidth <= 818 || currHeight <= 468) {
                currWidth = 818;
                currHeight = 468;
            }

            var dim = getResizeDimensions($(".splashbg").width(), $(".splashbg").height(), currWidth, currHeight);

            $(".splashbg").css("width",dim.width);
            $(".splashbg").css("height",dim.height);

        };

        $(window).resize(function() {
            changeWindow();
        });

        $('.btn-start').hover(function() {
            $('.coverup').fadeIn();
        }, function() {
            $('.coverup').fadeOut();
        });

        changeWindow();

        // play splash sound
        var playAudio = function() {
            var audio = document.getElementById('intro-sound');
            audio.play();
        };

        playAudio();

    </script>
    <!-- build:section analytics --><!-- /build -->
    </body>
</html>
